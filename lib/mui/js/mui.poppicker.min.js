(function(a,b){a.dom=function(f){if(typeof(f)!=="string"){if((f instanceof Array)||(f[0]&&f.length)){return[].slice.call(f)}else{return[f]}}if(!a.__create_dom_div__){a.__create_dom_div__=b.createElement("div")}a.__create_dom_div__.innerHTML=f;return[].slice.call(a.__create_dom_div__.childNodes)};var c='<div class="mui-poppicker">		<div class="mui-poppicker-header">			<button class="mui-btn mui-poppicker-btn-cancel">取消</button>			<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>			<div class="mui-poppicker-clear"></div>		</div>		<div class="mui-poppicker-body">		</div>	</div>';var d='<div class="mui-picker">		<div class="mui-picker-inner">			<div class="mui-pciker-rule mui-pciker-rule-ft"></div>			<ul class="mui-pciker-list">			</ul>			<div class="mui-pciker-rule mui-pciker-rule-bg"></div>		</div>	</div>';var e=a.PopPicker=a.Class.extend({init:function(f){var g=this;g.options=f||{};g.options.buttons=g.options.buttons||["取消","确定"];g.panel=a.dom(c)[0];b.body.appendChild(g.panel);g.ok=g.panel.querySelector(".mui-poppicker-btn-ok");g.cancel=g.panel.querySelector(".mui-poppicker-btn-cancel");g.body=g.panel.querySelector(".mui-poppicker-body");g.mask=a.createMask();g.cancel.innerText=g.options.buttons[0];g.ok.innerText=g.options.buttons[1];g.cancel.addEventListener("tap",function(h){g.hide()},false);g.ok.addEventListener("tap",function(h){if(g.callback){var i=g.callback(g.getSelectedItems());if(i!==false){g.hide()}}},false);g.mask[0].addEventListener("tap",function(){g.hide()},false);g._createPicker();g.panel.addEventListener("touchstart",function(h){h.preventDefault()},false);g.panel.addEventListener("touchmove",function(h){h.preventDefault()},false)},_createPicker:function(){var k=this;var g=k.options.layer||1;var l=(100/g)+"%";k.pickers=[];for(var f=1;f<=g;f++){var j=a.dom(d)[0];j.style.width=l;k.body.appendChild(j);var h=a(j).picker();k.pickers.push(h);j.addEventListener("change",function(i){var n=this.nextSibling;if(n&&n.picker){var m=i.detail||{};var o=m.item||{};n.picker.setItems(o.children)}},false)}},setData:function(f){var g=this;f=f||[];g.pickers[0].setItems(f)},getSelectedItems:function(){var j=this;var g=[];for(var f in j.pickers){var h=j.pickers[f];g.push(h.getSelectedItem()||{})}return g},show:function(f){var g=this;g.callback=f;g.mask.show();b.body.classList.add(a.className("poppicker-active-for-page"));g.panel.classList.add(a.className("active"));g.__back=a.back;a.back=function(){g.hide()}},hide:function(){var f=this;if(f.disposed){return}f.panel.classList.remove(a.className("active"));f.mask.close();b.body.classList.remove(a.className("poppicker-active-for-page"));a.back=f.__back},dispose:function(){var f=this;f.hide();setTimeout(function(){f.panel.parentNode.removeChild(f.panel);for(var g in f){f[g]=null;delete f[g]}f.disposed=true},300)}})})(mui,document);