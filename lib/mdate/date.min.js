function dateshow(){$("#datePlugin").animate({opacity:1},300);$("#datePlugin").addClass("show")}function datehide(){$("#datePlugin").animate({opacity:0},300);setTimeout(function(){$("#datePlugin").removeClass("show")},300)}(function(a){a.fn.date=function(J,S,H){var R=a(this);var o=a(this).is("input");var m=false;var I=new Date();var w=1,u=1,r=1;var s=1,t=1,v=0;var E=parseInt((I.getFullYear()))-1900;var C=parseInt(I.getMonth()+"")+1;var z=parseInt(I.getDate()+"");var A=parseInt(I.getHours());var B=parseInt(I.getMinutes());var D=parseInt(I.getYear());var T=null,G=null,n=null;var q=null,F=null,P=null;a.fn.date.defaultOptions={beginyear:1900,endyear:I.getFullYear()+50,beginmonth:1,endmonth:12,beginday:1,endday:31,beginhour:1,endhour:12,beginminute:0,endminute:59,curdate:false,theme:"date",mode:null,event:"click",show:true};var K=a.extend(true,{},a.fn.date.defaultOptions,J);if(K.theme==="datetime"){m=true}if(!K.show){R.unbind("click")}else{R.bind(K.event,function(){k();x();p();R.blur();if(m){Q();M()}L();c()})}function L(){T.refresh();G.refresh();n.refresh();O();T.scrollTo(0,E*50,100,true);G.scrollTo(0,C*50-50,100,true);n.scrollTo(0,z*50-50,100,true)}function M(){q.refresh();F.refresh();P.refresh();if(A>12){P.scrollTo(0,z*50-50,100,true);A=A-12-1}q.scrollTo(0,A*50,100,true);F.scrollTo(0,B*50,100,true);A=parseInt(I.getHours())}function N(){w=1;u=1;r=1}function O(){if(K.curdate){return false}else{if(R.val()===""){return false}}E=parseInt(R.val().substr(0,4))-K.beginyear;C=parseInt(R.val().substr(5,2));z=parseInt(R.val().substr(8,2))}function c(){N();a("#dateconfirm").unbind("click").click(function(){var U=a("#yearwrapper ul li:eq("+w+")").html().substr(0,a("#yearwrapper ul li:eq("+w+")").html().length-1)+"-"+a("#monthwrapper ul li:eq("+u+")").html().substr(0,a("#monthwrapper ul li:eq("+u+")").html().length-1)+"-"+a("#daywrapper ul li:eq("+Math.round(r)+")").html().substr(0,a("#daywrapper ul li:eq("+Math.round(r)+")").html().length-1);if(m){if(Math.round(v)===1){a("#Hourwrapper ul li:eq("+s+")").html(parseInt(a("#Hourwrapper ul li:eq("+s+")").html().substr(0,a("#Hourwrapper ul li:eq("+s+")").html().length-1))+12)}else{a("#Hourwrapper ul li:eq("+s+")").html(parseInt(a("#Hourwrapper ul li:eq("+s+")").html().substr(0,a("#Hourwrapper ul li:eq("+s+")").html().length-1)))}U+=" "+a("#Hourwrapper ul li:eq("+s+")").html().substr(0,a("#Minutewrapper ul li:eq("+s+")").html().length-1)+":"+a("#Minutewrapper ul li:eq("+t+")").html().substr(0,a("#Minutewrapper ul li:eq("+t+")").html().length-1);v=0}if(S===undefined){if(o){R.val(U)}else{R.find("i").eq(0).html(U)}}else{S(U)}datehide()});a("#datecancle").click(function(){datehide()})}function p(){dateshow()}function x(){var V=0;var U=0;T=new iScroll("yearwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){w=(this.y/50)*(-1)+1;V=a("#yearwrapper ul li:eq("+w+")").html().substr(0,a("#yearwrapper ul li:eq("+w+")").html().length-1);U=a("#monthwrapper ul li:eq("+u+")").html().substr(0,a("#monthwrapper ul li:eq("+u+")").html().length-1);K.endday=d(V,U);a("#daywrapper ul").html(f());n.refresh();a("#monthwrapper").find("li").eq(crentMonthindex).addClass("crently").siblings().removeClass("crently");a("#daywrapper").find("li").eq(crentDayindex).addClass("crently").siblings().removeClass("crently")}});G=new iScroll("monthwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){u=(this.y/50)*(-1)+1;V=a("#yearwrapper ul li:eq("+w+")").html().substr(0,a("#yearwrapper ul li:eq("+w+")").html().length-1);U=a("#monthwrapper ul li:eq("+u+")").html().substr(0,a("#monthwrapper ul li:eq("+u+")").html().length-1);K.endday=d(V,U);a("#daywrapper ul").html(f());n.refresh();a("#daywrapper").find("li").eq(crentDayindex).addClass("crently").siblings().removeClass("crently")}});n=new iScroll("daywrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){r=(this.y/50)*(-1)+1}})}function Q(){y();b();a("#datescroll_datetime").show();a("#Hourwrapper ul").html(g());a("#Minutewrapper ul").html(h());a("#Secondwrapper ul").html(j())}function y(){q=new iScroll("Hourwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){s=Math.round((this.y/50)*(-1))+1;q.refresh()}});F=new iScroll("Minutewrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){t=Math.round((this.y/50)*(-1))+1;q.refresh()}});P=new iScroll("Secondwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){v=Math.round((this.y/50)*(-1));q.refresh()}})}function d(Y,U){var X=Y;var W=U++;if(U>12){W-=12;X++}var V=new Date(X,W,1);return(new Date(V.getTime()-1000*60*60*24)).getDate()}function k(){e();a("#yearwrapper ul").html(l());a("#monthwrapper ul").html(i())}function e(){var U='<div id="datePage" class="page"><section><div id="datetitle"><h1>请选择日期</h1></div><div id="datemark"><a id="markyear"></a><a id="markmonth"></a><a id="markday"></a></div><div id="timemark"><a id="markhour"></a><a id="markminut"></a><a id="marksecond"></a></div><div id="datescroll"><div id="yearwrapper"><ul></ul></div><div id="monthwrapper"><ul></ul></div><div id="daywrapper"><ul></ul></div></div><div id="datescroll_datetime"><div id="Hourwrapper"><ul></ul></div><div id="Minutewrapper"><ul></ul></div><div id="Secondwrapper"><ul></ul></div></div></section><footer id="dateFooter"><div id="setcancle"><ul><li id="dateconfirm">确定</li><li id="datecancle">取消</li></ul></div></footer></div>';a("#datePlugin").html(U);dateshow()}function b(){a("#datePage").css("height","380px");a("#datePage").css("right","0");a("#yearwrapper").css("position","absolute");a("#yearwrapper").css("bottom","200px");a("#monthwrapper").css("position","absolute");a("#monthwrapper").css("bottom","200px");a("#daywrapper").css("position","absolute");a("#daywrapper").css("bottom","200px")}function l(){var V="<li>&nbsp;</li>";for(var U=K.beginyear;U<=K.endyear;U++){V+="<li>"+U+"年</li>"}return V+"<li>&nbsp;</li>"}function i(){var V="<li>&nbsp;</li>";for(var U=K.beginmonth;U<=K.endmonth;U++){if(U<10){U="0"+U}V+="<li>"+U+"月</li>"}return V+"<li>&nbsp;</li>"}function f(){a("#daywrapper ul").html("");var V="<li>&nbsp;</li>";for(var U=K.beginday;U<=K.endday;U++){V+="<li>"+U+"日</li>"}return V+"<li>&nbsp;</li>"}function g(){var V="<li>&nbsp;</li>";for(var U=K.beginhour;U<=K.endhour;U++){V+="<li>"+U+"时</li>"}return V+"<li>&nbsp;</li>"}function h(){var V="<li>&nbsp;</li>";for(var U=K.beginminute;U<=K.endminute;U++){if(U<10){U="0"+U}V+="<li>"+U+"分</li>"}return V+"<li>&nbsp;</li>"}function j(){var U="<li>&nbsp;</li>";U+="<li>上午</li><li>下午</li>";return U+"<li>&nbsp;</li>"}}})(jQuery);